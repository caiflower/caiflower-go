package leetcode

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

//ç»™å®š n ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//
//
//è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]
//è¾“å‡ºï¼š6
//è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šheight = [4,2,0,3,2,5]
//è¾“å‡ºï¼š9
//
//
//
//
// æç¤ºï¼š
//
//
// n == height.length
// 1 <= n <= 2 * 10â´
// 0 <= height[i] <= 10âµ
//
//
// Related Topics æ ˆ æ•°ç»„ åŒæŒ‡é’ˆ åŠ¨æ€è§„åˆ’ å•è°ƒæ ˆ ğŸ‘ 5938 ğŸ‘ 0

func Test42(t *testing.T) {
	// æµ‹è¯•ç”¨ä¾‹1ï¼šç¤ºä¾‹1ä¸­çš„æ•°æ®
	height1 := []int{0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1}
	assert.Equal(t, 6, trap(height1), "æ¥é›¨æ°´æµ‹è¯•ç”¨ä¾‹1å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹2ï¼šç¤ºä¾‹2ä¸­çš„æ•°æ®
	height2 := []int{4, 2, 0, 3, 2, 5}
	assert.Equal(t, 9, trap(height2), "æ¥é›¨æ°´æµ‹è¯•ç”¨ä¾‹2å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹3ï¼šç©ºæ•°ç»„
	height3 := []int{}
	assert.Equal(t, 0, trap(height3), "æ¥é›¨æ°´ç©ºæ•°ç»„æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹4ï¼šå•ä¸ªå…ƒç´ æ•°ç»„
	height4 := []int{5}
	assert.Equal(t, 0, trap(height4), "æ¥é›¨æ°´å•å…ƒç´ æ•°ç»„æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹5ï¼šæ‰€æœ‰å…ƒç´ ç›¸ç­‰
	height5 := []int{2, 2, 2, 2, 2}
	assert.Equal(t, 0, trap(height5), "æ¥é›¨æ°´æ‰€æœ‰å…ƒç´ ç›¸ç­‰æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹6ï¼šé€’å¢åºåˆ—
	height6 := []int{1, 2, 3, 4, 5}
	assert.Equal(t, 0, trap(height6), "æ¥é›¨æ°´é€’å¢åºåˆ—æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹7ï¼šé€’å‡åºåˆ—
	height7 := []int{5, 4, 3, 2, 1}
	assert.Equal(t, 0, trap(height7), "æ¥é›¨æ°´é€’å‡åºåˆ—æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹8ï¼šä¸¤ä¾§é«˜ä¸­é—´ä½
	height8 := []int{5, 1, 2, 1, 5}
	assert.Equal(t, 11, trap(height8), "æ¥é›¨æ°´ä¸¤ä¾§é«˜ä¸­é—´ä½æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹9ï¼šä¸¤ä¸ªå…ƒç´  - è¾¹ç•Œæƒ…å†µ
	height9 := []int{3, 1}
	assert.Equal(t, 0, trap(height9), "æ¥é›¨æ°´ä¸¤ä¸ªå…ƒç´ æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹10ï¼šä¸¤ä¸ªå…ƒç´ ç›¸ç­‰ - è¾¹ç•Œæƒ…å†µ
	height10 := []int{2, 2}
	assert.Equal(t, 0, trap(height10), "æ¥é›¨æ°´ä¸¤ä¸ªç›¸ç­‰å…ƒç´ æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹11ï¼šå…¨é›¶æ•°ç»„ - è¾¹ç•Œæƒ…å†µ
	height11 := []int{0, 0, 0, 0}
	assert.Equal(t, 0, trap(height11), "æ¥é›¨æ°´å…¨é›¶æ•°ç»„æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹12ï¼šå•å³°å½¢çŠ¶ - ç‰¹æ®Šæ¨¡å¼
	height12 := []int{1, 2, 3, 2, 1}
	assert.Equal(t, 0, trap(height12), "æ¥é›¨æ°´å•å³°å½¢çŠ¶æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹13ï¼šVå‹ - ç‰¹æ®Šæ¨¡å¼
	height13 := []int{3, 0, 2}
	assert.Equal(t, 2, trap(height13), "æ¥é›¨æ°´Vå‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹14ï¼šæ·±Vå‹ - ç‰¹æ®Šæ¨¡å¼
	height14 := []int{5, 0, 0, 0, 5}
	assert.Equal(t, 15, trap(height14), "æ¥é›¨æ°´æ·±Vå‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹15ï¼šWå‹ - ç‰¹æ®Šæ¨¡å¼
	height15 := []int{3, 0, 2, 0, 4}
	assert.Equal(t, 7, trap(height15), "æ¥é›¨æ°´Wå‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹16ï¼šå¤æ‚Wå‹ - ç‰¹æ®Šæ¨¡å¼
	height16 := []int{4, 1, 3, 1, 5}
	assert.Equal(t, 7, trap(height16), "æ¥é›¨æ°´å¤æ‚Wå‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹17ï¼šé˜¶æ¢¯å‹ä¸Šå‡ - ç‰¹æ®Šæ¨¡å¼
	height17 := []int{1, 1, 2, 2, 3, 3}
	assert.Equal(t, 0, trap(height17), "æ¥é›¨æ°´é˜¶æ¢¯å‹ä¸Šå‡æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹18ï¼šé˜¶æ¢¯å‹ä¸‹é™ - ç‰¹æ®Šæ¨¡å¼
	height18 := []int{3, 3, 2, 2, 1, 1}
	assert.Equal(t, 0, trap(height18), "æ¥é›¨æ°´é˜¶æ¢¯å‹ä¸‹é™æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹19ï¼šæ³¢æµªå‹ - ç‰¹æ®Šæ¨¡å¼
	height19 := []int{2, 1, 2, 1, 2}
	assert.Equal(t, 2, trap(height19), "æ¥é›¨æ°´æ³¢æµªå‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹20ï¼šå¤æ‚æ³¢æµªå‹ - ç‰¹æ®Šæ¨¡å¼
	height20 := []int{3, 1, 3, 1, 3, 1, 3}
	assert.Equal(t, 6, trap(height20), "æ¥é›¨æ°´å¤æ‚æ³¢æµªå‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹21ï¼šå·¦ä¾§é«˜å³ä¾§ä½ - è¾¹ç•Œæƒ…å†µ
	height21 := []int{5, 1, 2, 3}
	assert.Equal(t, 3, trap(height21), "æ¥é›¨æ°´å·¦ä¾§é«˜å³ä¾§ä½æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹22ï¼šå³ä¾§é«˜å·¦ä¾§ä½ - è¾¹ç•Œæƒ…å†µ
	height22 := []int{1, 2, 3, 5}
	assert.Equal(t, 0, trap(height22), "æ¥é›¨æ°´å³ä¾§é«˜å·¦ä¾§ä½æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹23ï¼šä¸­é—´é«˜ä¸¤ä¾§ä½ - ç‰¹æ®Šæ¨¡å¼
	height23 := []int{1, 5, 1}
	assert.Equal(t, 0, trap(height23), "æ¥é›¨æ°´ä¸­é—´é«˜ä¸¤ä¾§ä½æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹24ï¼šå¤šä¸ªå°å‘ - å¤æ‚æƒ…å†µ
	height24 := []int{2, 1, 2, 1, 2, 1, 2}
	assert.Equal(t, 3, trap(height24), "æ¥é›¨æ°´å¤šä¸ªå°å‘æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹25ï¼šå¤§å‘å°å‘ç»„åˆ - å¤æ‚æƒ…å†µ
	height25 := []int{5, 1, 3, 1, 5, 2, 4}
	assert.Equal(t, 12, trap(height25), "æ¥é›¨æ°´å¤§å‘å°å‘ç»„åˆæµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹26ï¼šä¸è§„åˆ™é«˜åº¦åˆ†å¸ƒ - å¤æ‚æƒ…å†µ
	height26 := []int{6, 4, 2, 0, 3, 2, 0, 3, 1, 4, 5, 3, 2, 7, 5, 3, 0, 2}
	assert.Equal(t, 45, trap(height26), "æ¥é›¨æ°´ä¸è§„åˆ™é«˜åº¦åˆ†å¸ƒæµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹27ï¼šåªæœ‰å¼€å¤´å’Œç»“å°¾é«˜ - è¾¹ç•Œæƒ…å†µ
	height27 := []int{4, 0, 0, 0, 0, 4}
	assert.Equal(t, 16, trap(height27), "æ¥é›¨æ°´åªæœ‰å¼€å¤´å’Œç»“å°¾é«˜æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹28ï¼šä¸‰ä¸ªå…ƒç´ ç®€å•æƒ…å†µ - è¾¹ç•Œæƒ…å†µ
	height28 := []int{2, 1, 3}
	assert.Equal(t, 1, trap(height28), "æ¥é›¨æ°´ä¸‰ä¸ªå…ƒç´ ç®€å•æƒ…å†µæµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹29ï¼šä¸‰ä¸ªå…ƒç´ æ— ç§¯æ°´ - è¾¹ç•Œæƒ…å†µ
	height29 := []int{1, 2, 3}
	assert.Equal(t, 0, trap(height29), "æ¥é›¨æ°´ä¸‰ä¸ªå…ƒç´ æ— ç§¯æ°´æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹30ï¼šå¤šå³°æƒ…å†µ - å¤æ‚æƒ…å†µ
	height30 := []int{3, 1, 3, 1, 2, 1, 4}
	assert.Equal(t, 7, trap(height30), "æ¥é›¨æ°´å¤šå³°æƒ…å†µæµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹31ï¼šå¤§æ•°å€¼æµ‹è¯• - æç«¯æƒ…å†µ
	height31 := []int{100000, 0, 100000}
	assert.Equal(t, 100000, trap(height31), "æ¥é›¨æ°´å¤§æ•°å€¼æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹32ï¼šå¤§æ•°å€¼å¤æ‚æƒ…å†µ - æç«¯æƒ…å†µ
	height32 := []int{50000, 25000, 75000, 10000, 90000}
	assert.Equal(t, 90000, trap(height32), "æ¥é›¨æ°´å¤§æ•°å€¼å¤æ‚æƒ…å†µæµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹33ï¼šæœ€å°å€¼è¾¹ç•Œ - æç«¯æƒ…å†µ
	height33 := []int{0, 1, 0}
	assert.Equal(t, 0, trap(height33), "æ¥é›¨æ°´æœ€å°å€¼è¾¹ç•Œæµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹34ï¼šé•¿æ•°ç»„é€’å¢ - å¤æ‚æƒ…å†µ
	height34 := make([]int, 100)
	for i := 0; i < 100; i++ {
		height34[i] = i + 1
	}
	assert.Equal(t, 0, trap(height34), "æ¥é›¨æ°´é•¿æ•°ç»„é€’å¢æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹35ï¼šé•¿æ•°ç»„é€’å‡ - å¤æ‚æƒ…å†µ
	height35 := make([]int, 100)
	for i := 0; i < 100; i++ {
		height35[i] = 100 - i
	}
	assert.Equal(t, 0, trap(height35), "æ¥é›¨æ°´é•¿æ•°ç»„é€’å‡æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹36ï¼šé•¿æ•°ç»„Vå‹ - å¤æ‚æƒ…å†µ
	height36 := []int{100, 1, 1, 1, 1, 1, 1, 1, 1, 1, 100}
	assert.Equal(t, 891, trap(height36), "æ¥é›¨æ°´é•¿æ•°ç»„Vå‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹37ï¼šé”¯é½¿çŠ¶ - ç‰¹æ®Šæ¨¡å¼
	height37 := []int{1, 0, 1, 0, 1, 0, 1}
	assert.Equal(t, 3, trap(height37), "æ¥é›¨æ°´é”¯é½¿çŠ¶æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹38ï¼šå¹³å°å‹ - ç‰¹æ®Šæ¨¡å¼
	height38 := []int{3, 3, 1, 1, 3, 3}
	assert.Equal(t, 4, trap(height38), "æ¥é›¨æ°´å¹³å°å‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹39ï¼šå¤æ‚å¹³å°å‹ - ç‰¹æ®Šæ¨¡å¼
	height39 := []int{5, 5, 1, 3, 3, 1, 5, 5}
	assert.Equal(t, 12, trap(height39), "æ¥é›¨æ°´å¤æ‚å¹³å°å‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹40ï¼šå±±è°·å‹ - ç‰¹æ®Šæ¨¡å¼
	height40 := []int{4, 3, 2, 1, 2, 3, 4}
	assert.Equal(t, 9, trap(height40), "æ¥é›¨æ°´å±±è°·å‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹41ï¼šä¸å¯¹ç§°å±±è°· - ç‰¹æ®Šæ¨¡å¼
	height41 := []int{6, 2, 1, 0, 1, 3}
	assert.Equal(t, 8, trap(height41), "æ¥é›¨æ°´ä¸å¯¹ç§°å±±è°·æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹42ï¼šå¤šå±‚é˜¶æ¢¯ - å¤æ‚æƒ…å†µ
	height42 := []int{5, 1, 2, 1, 3, 1, 4, 1, 5}
	assert.Equal(t, 22, trap(height42), "æ¥é›¨æ°´å¤šå±‚é˜¶æ¢¯æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹43ï¼šå€’Uå‹ - ç‰¹æ®Šæ¨¡å¼
	height43 := []int{1, 3, 5, 3, 1}
	assert.Equal(t, 0, trap(height43), "æ¥é›¨æ°´å€’Uå‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹44ï¼šå¤åˆå‹ - å¤æ‚æƒ…å†µ
	height44 := []int{3, 0, 2, 0, 4, 0, 3, 2, 1, 0, 1, 2, 3}
	assert.Equal(t, 19, trap(height44), "æ¥é›¨æ°´å¤åˆå‹æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹45ï¼šè¾¹ç¼˜å‡¹é™· - è¾¹ç•Œæƒ…å†µ
	height45 := []int{0, 2, 0}
	assert.Equal(t, 0, trap(height45), "æ¥é›¨æ°´è¾¹ç¼˜å‡¹é™·æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹46ï¼šæ·±å‘æµ…å‘ - å¤æ‚æƒ…å†µ
	height46 := []int{4, 0, 0, 2, 0, 0, 4}
	assert.Equal(t, 18, trap(height46), "æ¥é›¨æ°´æ·±å‘æµ…å‘æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹47ï¼šèµ·ä¼ä¸å®š - å¤æ‚æƒ…å†µ
	height47 := []int{2, 1, 0, 1, 3, 0, 1, 2, 0, 3, 1, 0, 2}
	assert.Equal(t, 16, trap(height47), "æ¥é›¨æ°´èµ·ä¼ä¸å®šæµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹48ï¼šé«˜ä½äº¤æ›¿ - ç‰¹æ®Šæ¨¡å¼
	height48 := []int{5, 0, 5, 0, 5, 0, 5}
	assert.Equal(t, 15, trap(height48), "æ¥é›¨æ°´é«˜ä½äº¤æ›¿æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹49ï¼šæ¸è¿›å¼ - å¤æ‚æƒ…å†µ
	height49 := []int{1, 0, 2, 0, 3, 0, 4, 0, 5}
	assert.Equal(t, 10, trap(height49), "æ¥é›¨æ°´æ¸è¿›å¼æµ‹è¯•å¤±è´¥")

	// æµ‹è¯•ç”¨ä¾‹50ï¼šç»¼åˆæµ‹è¯• - æç«¯æƒ…å†µ
	height50 := []int{10, 5, 0, 7, 3, 0, 8, 2, 1, 0, 6, 4, 0, 9, 1, 0, 5, 3, 2, 10}
	assert.Equal(t, 124, trap(height50), "æ¥é›¨æ°´ç»¼åˆæµ‹è¯•å¤±è´¥")
}

// leetcode submit region begin(Prohibit modification and deletion)
type intStack [][2]int

func (s *intStack) Push(x [2]int) {
	*s = append(*s, x)
}

func (s *intStack) Pop() [2]int {
	val := (*s)[len(*s)-1]
	*s = (*s)[:len(*s)-1]
	return val
}

func (s *intStack) Peek() [2]int {
	return (*s)[len(*s)-1]
}

func (s *intStack) Size() int {
	return len(*s)
}

// æœ€å®¹æ˜“ç†è§£çš„æ–¹æ³•
// æš´åŠ›æ³•çš„ä¼˜åŒ–ï¼Œæ‰¾å‡ºæ¯ä¸ªæŸ±å­ä¸¤è¾¹çš„é«˜æŸ±ï¼Œç”¨å°çš„é«˜æŸ±å‡å»è¿™ä¸ªæŸ±å­çš„é«˜åº¦ï¼Œæ±‚å’Œå°±æ˜¯ç»“æœ
// æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(n)
func trap1(height []int) int {
	if 0 == len(height) {
		return 0
	}

	ans := 0
	var l, r [20000]int
	lv, rv := 0, 0
	for i := 0; i < len(height); i++ {
		l[i] = lv
		lv = max(height[i], lv)
	}
	for i := len(height) - 1; i >= 0; i-- {
		r[i] = rv
		rv = max(height[i], rv)
	}

	for i := 1; i < len(height); i++ {
		if r[i] > height[i] && l[i] > height[i] {
			ans += min(r[i], l[i]) - height[i]
		}
	}

	return ans
}

// åŒæŒ‡é’ˆæ³•ï¼Œä»å·¦å³ä¸¤è¾¹å¼€å§‹éå†ï¼Œæ¯æ¬¡ç§»åŠ¨é«˜åº¦å°çš„æŒ‡é’ˆï¼ˆå› ä¸ºæ¥æ°´çš„æ—¶å€™å…³å¿ƒçš„æ˜¯çŸ®çš„æŸ±å­ï¼‰ï¼Œå¹¶æ›´æ–°æœ€å¤§é«˜åº¦ï¼Œå¦‚æœå½“å‰é«˜åº¦å°äºæœ€å¤§é«˜åº¦ï¼Œåˆ™å¯ä»¥æ¥é›¨æ°´ï¼Œç´¯åŠ åˆ°ç»“æœä¸­ã€‚
// æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(1)
func trap2(height []int) int {
	if 0 == len(height) {
		return 0
	}

	ans := 0

	l, r := 1, len(height)-2
	lv, rv := height[l-1], height[r+1]
	for l <= r {
		if lv < rv {
			if lv > height[l] {
				ans += lv - height[l]
			}
			lv = max(lv, height[l])
			l++
		} else {
			if rv > height[r] {
				ans += rv - height[r]
			}
			rv = max(rv, height[r])
			r--
		}
	}

	return ans
}

// å•è°ƒæ ˆå†™æ³•
// å•è°ƒé€’å‡æ ˆæ±‚é›¨æ°´ï¼Œç›¸å¯¹å¤æ‚ï¼Œä¸å¤ªå¥½æƒ³å‡ºæ¥ï¼Œå»ºè®®ç”¨ç¤ºä¾‹2æ¥æƒ³ç€å†™
// æ—¶é—´å¤æ‚åº¦O(n), ç©ºé—´å¤æ‚åº¦O(n)
func trap(height []int) int {
	if height == nil || len(height) == 0 {
		return 0
	}

	s := intStack{}
	ans := 0

	for i := 0; i < len(height); i++ {
		tmp := 0
		for s.Size() > 0 && height[i] >= s.Peek()[1] {
			t := s.Pop()
			if s.Size() > 0 {
				tmp += (i - s.Peek()[0] - 1) * (min(s.Peek()[1], height[i]) - t[1])
			}
		}

		ans += tmp
		s.Push([2]int{i, height[i]})
	}

	return ans
}

//leetcode submit region end(Prohibit modification and deletion)
